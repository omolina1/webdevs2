<!DOCTYPE html>
<html>
    <head>
        <title>Towed Vehicle Data base</title>
        <style>
    #hi{
        background-color:Black;
    }
        body {background-color: gray;}
            p, h1 {font-family: helvetica; color: blue;}
            p {font-size:1.5em;line-height:1.5em; margin-left: 24px;}
            pre {font-size: 2em;}
            h3{background-color:red;}
           
            .center{margin: auto;
            width: 100%;border: 3px solid blue;
            padding: 10px solid red;}
            .undefined{background-color:red;}
            div{border: 1px solid black; margin: 5px; border-radius: 5px; background-color: #ededed;}
            
        </style>
    </head>
    <body>
        
        
<div class="center">
  <img src="http://www.andiamocreative.com/wp-content/uploads/2015/05/Seal_of_Chicago_Illinois.svg_-1024x1024.png" style="width:304px;height:228px;" size="30%">
</div>
  <center>
<h1 id="hi"> Crime Rates, Case Numbers </h1>  


 <div id="form">
        <input type="text" id="plateNumber" placeholder="License Plate Number">
        <button id="submit">Submit</button> 
    </div> 

<div id="demo"></div>
</center>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
   <script>
        /*
            This script retrieves tow service data for ___
            from the 
            City of Chicago Data Portal
            
            This script doesn't update the DOM.

        */

        // base URL to the food inspections data
        var baseURL = 'https://data.cityofchicago.org/resource/itbm-jtnw.json';
        
        // optional filters we're appending - status
        var filters = '';
        
        // full URL
        var url = baseURL + filters;
        
        console.log (url);
        
        $(
            // jQuery command to retrieve json data
            
            $.getJSON(url)
            
            
                .done (function (data) {
                    // TODO:  add script to add data to the DOM
                    console.log(data);

                    // loop through the records
                    
                    $.each(data, function(index, value){
                       var html = "<center><div><h1>Date: " + value.date + "</h1>" +
                                    "<p>Case Number: " + value.case_number + "<br>" +
                                    "Primary Crime: " + value.primary_type +
                                    "</p>" +
                                    "<h3> Description:"+ value.description +"</h3></div></center>";
                                    
                        $("body").append(html);
                    });
                })
            
            
        )
        
        function myFunction1(find, value) {
    $.each(data, function(index, value){
                       
                       
                       
                        $("body").append(html);
        });
        }
        
        var plate = value.plate;

        function checkCar(plate) {
        return plate = plate;
        }

        function myFunction2() {
         document.getElementById("demo").innerHTML = plate.find(checkCar);
         console.log(myfunction1)
    }
    
    
    
     var towedVehicle;
            
            $(function(){
                
                $("#submit").click(function(){
                
                    var html = "";
                    
                    //  variable to hold the returned data
                    var inspections;
                    
                    // base URL to the food inspections data
                    var baseURL = 'https://data.cityofchicago.org/resource/itbm-jtnw.json';
                    
                    // optional filters we're appending - date range and zip
                    var filters = "?plate=" + $("#plateNumber").val();
                    
                    // full URL
                    var url = baseURL + filters;
                        
                    $.getJSON(url).done (function (data) {
                        // TODO:  add script to add data to the DOM
                        console.log(data);
                        // loop through the records
                        
                        towedVehicle = data;
                        
                        if(towedVehicle.length == 0){
                            html = "No Vehicle Reported";
                        } else{
                            $.each(towedVehicle, function(index, value){
                                
                                html += "<center><div><h1>Date: " + value.date + "</h1>" +
                                    "<p>Case Number: " + value.case_number + "<br>" +
                                    "Primary Crime: " + value.primary_type +
                                    "</p>" +
                                    "<h3> Description:"+ value.description +"</h3></div></center>";
                            
                            })  // end of .each loop
                        }
                        
                        $("#results").html(html);
                        
                    }) // end of getJSON function
                    
                })  // end of click function
                
            }) // end of ready command
            
    </script>
    </body>
</html>


